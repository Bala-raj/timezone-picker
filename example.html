<html>
<head>
  <script type="text/javascript"
   src="http://maps.google.com/maps/api/js?sensor=false"></script>
  <script type="text/javascript"
   src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
  </script>
  <script type="text/javascript" src="jquery.timezone-picker.js">
  </script>

  <script>
  $(function() {
    var pad = function(d) {
      if (d < 10) {
        return '0' + d;
      }
      return d.toString();
    };

    $("#zonepicker").timezonePicker({
      initialLat: 20,
      initialLng: 0,
      initialZoom: 2,
      onSelected: function(olsonName, utcOffset, tzName) {
        var now = new Date();
        var adjusted = new Date();
        adjusted.setTime(adjusted.getTime() +
          (adjusted.getTimezoneOffset() + utcOffset) * 60 * 1000);

        $("#zonepicker").timezonePicker('showInfoWindow', '<h2>' +
          tzName + '</h2>' +
          '<div class="metadata">' +
          '<div>Nearest City: ' +
          olsonName.split('/').slice(-1)[0].replace('_', ' ')  + '</div>' +
          '<div>Current Time: ' +
          pad(adjusted.getHours()) + ':' +
          pad(adjusted.getMinutes()) + ':' +
          pad(adjusted.getSeconds()) + '</div>' +
          '<div>Your Time: ' +
          pad(now.getHours()) + ':' +
          pad(now.getMinutes()) + ':' +
          pad(now.getSeconds()) + '</div>' +
          '<div>UTC Offset (in hours): ' +
          (utcOffset / 60) + '</div>' +
          '</div>');
      },
      onHover: function(utcOffset) {
        $('#label').text('UTC Offset: ' + utcOffset + ' minutes');
      }
    });
  });
  </script>
  <style>
    .timezone-picker-infowindow {
      font-family: Arial, Helvetica, sans-serif;
      text-align: left;
    }

    .timezone-picker-infowindow h2 {
      margin: 4px 0;
    }

    .timezone-picker-infowindow .metadata {
      color: #444;
    }

  </style>
</head>
<body>
  <center>
    <div id="zonepicker" style="width: 960px; height: 500px;">
    </div>
    <div id="label"></div>
  </center>
</body>
</html>
